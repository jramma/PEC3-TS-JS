(()=>{"use strict";var t,e,o,i={729:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TodoController=void 0;e.TodoController=function(t,e){var o=this;this.onTodoListChanged=function(t){o.view.displayTodos(t)},this.handleAddTodo=function(t){o.service.addTodo(t)},this.handleEditTodo=function(t,e){o.service.editTodo(t,e)},this.handleDeleteTodo=function(t){o.service.deleteTodo(t)},this.handleToggleTodo=function(t){o.service.toggleTodo(t)},this.service=t,this.view=e,this.service.bindTodoListChanged(this.onTodoListChanged),this.view.bindAddTodo(this.handleAddTodo),this.view.bindEditTodo(this.handleEditTodo),this.view.bindDeleteTodo(this.handleDeleteTodo),this.view.bindToggleTodo(this.handleToggleTodo),this.onTodoListChanged(this.service.todos)}},861:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Todo=void 0;var o=function(){function t(t){var e=void 0===t?{text:"",complete:!1}:t,o=e.text,i=void 0===o?"":o,n=e.complete,d=void 0!==n&&n;this.id=this.uuidv4(),this.text=i,this.complete=d}return t.prototype.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},t}();e.Todo=o},789:function(t,e,o){var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.TodoService=void 0;var n=o(861),d=function(){function t(){this.todos=(JSON.parse(localStorage.getItem("todos"))||[]).map((function(t){return new n.Todo(t)}))}return t.prototype.bindTodoListChanged=function(t){this.onTodoListChanged=t},t.prototype._commit=function(t){this.onTodoListChanged(t),localStorage.setItem("todos",JSON.stringify(t))},t.prototype.addTodo=function(t){var e=new n.Todo({text:t});this.todos.push(e),this._commit(this.todos)},t.prototype.editTodo=function(t,e){this.todos=this.todos.map((function(o){return o.id===t?new n.Todo(i(i({},o),{text:e})):o})),this._commit(this.todos)},t.prototype.deleteTodo=function(t){this.todos=this.todos.filter((function(e){return e.id!==t})),this._commit(this.todos)},t.prototype.toggleTodo=function(t){this.todos=this.todos.map((function(e){return e.id===t?new n.Todo(i(i({},e),{complete:!e.complete})):e})),this._commit(this.todos)},t}();e.TodoService=d},246:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TodoView=void 0;var o=function(){function t(){this.app=this.getElement("#root"),this.form=this.createElement("form"),this.input=this.createElement("input"),this.input.type="text",this.input.placeholder="Add todo",this.input.name="todo",this.submitButton=this.createElement("button"),this.submitButton.textContent="Submit",this.form.append(this.input,this.submitButton),this.title=this.createElement("h1"),this.title.textContent="Todos",this.todoList=this.createElement("ul","todo-list"),this.app.append(this.title,this.form,this.todoList),this._temporaryTodoText="",this._initLocalListeners()}return Object.defineProperty(t.prototype,"_todoText",{get:function(){return this.input.value},enumerable:!1,configurable:!0}),t.prototype._resetInput=function(){this.input.value=""},t.prototype.createElement=function(t,e){var o=document.createElement(t);return e&&o.classList.add(e),o},t.prototype.getElement=function(t){return document.querySelector(t)},t.prototype.displayTodos=function(t){for(var e=this;this.todoList.firstChild;)this.todoList.removeChild(this.todoList.firstChild);if(0===t.length){var o=this.createElement("p");o.textContent="Nothing to do! Add a task?",this.todoList.append(o)}else t.forEach((function(t){var o=e.createElement("li");o.id=t.id;var i=e.createElement("input");i.type="checkbox",i.checked=t.complete;var n=e.createElement("span");if(n.contentEditable=t.complete.toString(),n.classList.add("editable"),t.complete){var d=e.createElement("s");d.textContent=t.text,n.append(d)}else n.textContent=t.text;var s=e.createElement("button","delete");s.textContent="Delete",o.append(i,n,s),e.todoList.append(o)}));console.log(t)},t.prototype._initLocalListeners=function(){var t=this;this.todoList.addEventListener("input",(function(e){var o=e.target;"editable"===o.className&&(t._temporaryTodoText=o.innerText)}))},t.prototype.bindAddTodo=function(t){var e=this;this.form.addEventListener("submit",(function(o){o.preventDefault(),e._todoText&&(t(e._todoText),e._resetInput())}))},t.prototype.bindDeleteTodo=function(t){this.todoList.addEventListener("click",(function(e){var o=e.target;if("delete"===o.className){var i=o.parentElement.id;t(i)}}))},t.prototype.bindEditTodo=function(t){var e=this;this.todoList.addEventListener("focusout",(function(o){var i=o.target;if(e._temporaryTodoText){var n=i.parentElement.id;t(n,e._temporaryTodoText),e._temporaryTodoText=""}}))},t.prototype.bindToggleTodo=function(t){this.todoList.addEventListener("change",(function(e){var o=e.target;if("checkbox"===o.type){var i=o.parentElement.id;t(i)}}))},t}();e.TodoView=o}},n={};function d(t){var e=n[t];if(void 0!==e)return e.exports;var o=n[t]={exports:{}};return i[t].call(o.exports,o,o.exports,d),o.exports}t=d(729),e=d(789),o=d(246),new t.TodoController(new e.TodoService,new o.TodoView)})();